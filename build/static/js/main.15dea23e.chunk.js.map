{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/modal.js","components/server-comm.js","App.js","index.js"],"names":["Filter","filter","updateFilter","value","onChange","PersonForm","props","onSubmit","addName","newName","handleNameChange","required","newNumber","handleNumberChange","type","Persons","filteredList","Modal","msg","style","message","baseUrl","axios","get","then","response","data","newObj","post","id","delete","put","evalAndTrim","str","regex","match","join","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","messageBox","setMessageBox","useEffect","phoneService","people","catch","err","console","log","deleteNumberandUpdateList","name","window","confirm","person","checkForExistingName","toLowerCase","displayMsgBox","setTimeout","event","filterInput","target","preventDefault","trimmed","replace","alreadyAdded","existingID","index","length","test","changedNum","find","p","number","returnedNum","map","error","color","border","fontSize","finally","alert","RegExp","key","onClick","ReactDOM","render","document","getElementById"],"mappings":"6PAIeA,EAFD,SAAC,GAAD,IAAEC,EAAF,EAAEA,OAAOC,EAAT,EAASA,aAAT,OAA2B,2BAAOC,MAAOF,EAAQG,SAAUF,KCc1DG,EAdI,SAACC,GAChB,OAAQ,0BAAMC,SAAUD,EAAME,SAC1B,sCACU,2BAAOL,MAAOG,EAAMG,QAASL,SAAUE,EAAMI,iBAAkBC,UAAQ,KAEjF,wCACY,2BAAOR,MAAOG,EAAMM,UAAWR,SAAUE,EAAMO,mBAAoBF,UAAQ,KAEvF,6BACI,4BAAQG,KAAK,UAAb,UCPGC,EAFA,SAAC,GAAD,IAAEC,EAAF,EAAEA,aAAF,OAAoB,6BAAMA,MCK1BC,EALF,SAAC,GACb,IADcC,EACf,EADeA,IAEZ,OAAe,OAARA,EAAa,KAAK,yBAAKC,MAAOD,EAAIC,OAAQD,EAAIE,U,gBCHlDC,EAAS,eAyBA,EAvBE,WAEb,OADUC,IAAMC,IAAIF,GACTG,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAqB1B,EAlBK,SAACC,GAGjB,OADeL,IAAMM,KAAKP,EAAQM,GAClBH,KAAK,SAAAC,GAAQ,OAAEA,EAASC,QAe7B,EAZK,SAACG,GAGjB,OADcP,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BQ,KAU9B,EANK,SAACA,EAAGF,GAGpB,OADcL,IAAMS,IAAN,UAAaV,EAAb,YAAwBQ,GAAKF,GAC5BH,KAAK,SAAAC,GAAQ,OAAGA,EAASC,Q,4NChB5C,IA8HMM,EAAc,SAACC,EAAKC,GAEtB,OADAD,EAAMA,EAAIE,MAAMD,IACKD,EAAIG,KAAK,IAAd,IAILC,EApIH,WAAO,IAAD,EACgBC,mBAAS,IADzB,mBACPC,EADO,KACEC,EADF,OAEgBF,mBAAS,IAFzB,mBAEP7B,EAFO,KAEEgC,EAFF,OAGoBH,mBAAS,IAH7B,mBAGP1B,EAHO,KAGI8B,EAHJ,OAIcJ,mBAAS,IAJvB,mBAIPrC,EAJO,KAIC0C,EAJD,OAKsBL,mBAAS,MAL/B,mBAKPM,EALO,KAKKC,EALL,KAMdC,oBAAU,WACNC,IAAyBvB,KAAK,SAAAwB,GAAM,OAAIR,EAAWQ,KAASC,MAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAI,wBACtF,IAEH,IAyEMC,EAA4B,SAACC,EAAMzB,GACrC,QAAQ0B,OAAOC,QAAP,iBAAyBF,EAAzB,OAEJP,EAA0BlB,GACrBL,KAAK,WACFgB,EAAWD,EAAQtC,OAAO,SAAAwD,GAAM,OAAIA,EAAO5B,KAAOA,OAErDoB,MAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAI,gDAIhCM,EAAuB,SAACD,EAAQhD,GAClC,QAAIA,GACQA,EAAQkD,gBAAkBF,EAAOE,eAM3CC,EAAgB,SAAC1C,GACnB2B,EAAc3B,GACd2C,WAAW,WACPhB,EAAc,OACf,MAIP,OAAQ,6BACJ,2CACA,kBAAC,EAAD,CAAO3B,IAAK0B,IACZ,kBACI,EADJ,CACW3C,OAAQA,EACfC,aAhDa,SAAC4D,GAClB,IAAIC,EAAc/B,EAAY8B,EAAME,OAAO7D,MAAO,kBAClDwC,EAAUoB,MA+CV,mDANI,IAM0B,kBAC1B,EAD0B,CACfvD,QA3GH,SAACsD,GACbA,EAAMG,iBAIN,IAFA,IAAIC,EAAUzD,EAAUA,EAAQ0D,QAAQ,iBAAkB,IAAM,GAC5DC,GAAe,EAAOC,EAAa,EAC9BC,EAAQ,EAAGA,EAAQ/B,EAAQgC,OAAQD,IACxC,GAAIZ,EAAqBnB,EAAQ+B,GAAR,KAAwBJ,GAAU,CACvDE,GAAe,EACfC,EAAa9B,EAAQ+B,GAAR,GACb,MAGR,GAAK,oDAAoDE,KAAK5D,GAGzD,IAAIwD,EACL,OAAQb,OAAOC,QAAP,UAAkBU,EAAlB,2EAEH,SAACrC,GACE,IACM4C,E,qVAAU,IADKlC,EAAQmC,KAAK,SAAAC,GAAC,OAAIA,EAAE9C,KAAOA,IAChC,CAAwB+C,OAAQhE,IAChD,OAAOmC,EAA0BlB,EAAI4C,GAChCjD,KAAK,SAACqD,GAAD,OAAiBrC,EAAWD,EAAQuC,IAAI,SAAArB,GAAM,OAAIA,EAAO5B,KAAOA,EAAK4B,EAASoB,OACnF5B,MAAM,SAAA8B,GACHnB,EAAc,CAACxC,QAAQ,kBAAD,OAAoB8C,EAApB,yCAAmE/C,MAAM,CAAE6D,MAAO,MAAMC,OAAQ,gBAAiBC,SAAU,MACjJ3C,EAAQtC,OAAO,SAAA0E,GAAC,OAAIA,IAAMA,EAAE9C,OAE/BsD,QAAQ,WAAQ1C,EAAW,IAAKC,EAAa,MATrD,CAUE2B,GAEH5B,EAAW,IAGfM,EAA0B,CAAEO,KAAMY,EAASU,OAAQhE,IAC9CY,KAAK,SAAAiC,GACFN,QAAQC,IAAI,uBACZZ,EAAW,GAAD,mBAAKD,GAAL,CAAckB,KACxBhB,EAAW,IACXC,EAAa,MAEhBO,MAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAI,qBAAsBF,KAC/CiC,QAAQ,kBAAMvB,EAAc,CAACxC,QAAQ,SAAD,OAAW8C,EAAX,qBAAsC/C,MAAM,CAAE6D,MAAO,QAAQC,OAAQ,kBAAmBC,SAAU,aA5B3IE,MAAM,sHA+FN3E,QAASA,EACTG,UAAWA,EACXF,iBAjEiB,SAACoD,GAEtB,IAAIC,EAAc/B,EAAY8B,EAAME,OAAO7D,MAAO,kBAClDsC,EAAWsB,IA+DPlD,mBA5DmB,SAACiD,GAExB,IAAIC,EAAc/B,EAAY8B,EAAME,OAAO7D,MAAO,gBAClDuC,EAAaqB,MA0Db,yCAZI,IAYgB,kBAAC,EAAD,CAAS/C,aAlDZ,WAQjB,OAHoBuB,EAAQtC,OAAO,SAACwD,GAChC,OAASxD,GALeqD,EAKyBG,EAAOH,KAJ/C,IAAI+B,OAAOpF,EAAQ,MAClBuE,KAAKlB,IAGIG,EALI,IAACH,IAONwB,IAAI,SAAArB,GAAM,OAAI,yBAAK6B,IAAK7B,EAAOH,MAAjB,IAA0BG,EAAOH,KAAjC,IAAwCG,EAAOmB,OAA/C,IAAuD,4BAAQW,QAAS,kBAAMlC,EAA0BI,EAAOH,KAAMG,EAAO5B,MAArE,gBA8BvF,MChHZ2D,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.15dea23e.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter= ({filter,updateFilter}) =>(<input value={filter} onChange={updateFilter} />)\r\n\r\nexport default Filter;","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    return (<form onSubmit={props.addName}>\r\n        <div>\r\n            name: <input value={props.newName} onChange={props.handleNameChange} required />\r\n        </div>\r\n        <div>\r\n            number: <input value={props.newNumber} onChange={props.handleNumberChange} required />\r\n        </div>\r\n        <div>\r\n            <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>)\r\n}\r\n\r\nexport default PersonForm","import React from 'react';\r\n\r\nconst Persons= ({filteredList})=> (<div>{filteredList()}</div>);\r\n\r\nexport default Persons;\r\n","import React from 'react';\r\n\r\nconst Modal= ({msg}) =>\r\n{\r\n   return msg === null?null:<div style={msg.style}>{msg.message}</div>\r\n}\r\n\r\nexport default Modal;","import axios from 'axios'\r\nconst baseUrl ='/api/persons'\r\n\r\nconst getPeople= ()=>{\r\n    const req=axios.get(baseUrl);\r\n    return req.then(response => response.data);\r\n}\r\n\r\nconst createPerson= (newObj)=>\r\n{\r\n    const sentData=axios.post(baseUrl,newObj);\r\n    return sentData.then(response=>response.data);\r\n}\r\n\r\nconst deletePerson= (id)=>\r\n{\r\n    const deleted=axios.delete(`${baseUrl}/${id}`);\r\n    return deleted;\r\n}\r\n\r\nconst updatePerson= (id,newObj)=>\r\n{\r\n    const updated=axios.put(`${baseUrl}/${id}`,newObj);\r\n    return updated.then(response=> response.data);\r\n}\r\n\r\nexport default { getPeople,createPerson,deletePerson,updatePerson}","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport Modal from './components/modal'\r\nimport phoneService from './components/server-comm'\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([]);\r\n    const [newName, setNewName] = useState('');\r\n    const [newNumber, setNewNumber] = useState('');\r\n    const [filter, setFilter] = useState('');\r\n    const [messageBox, setMessageBox] = useState(null);\r\n    useEffect(() => {\r\n        phoneService.getPeople().then(people => setPersons(people)).catch(err => console.log('Connection failed'));\r\n    }, [])\r\n\r\n    const addName = (event) => {\r\n        event.preventDefault();\r\n        //trimming spaces or tabs at the beggining or end of string\r\n        let trimmed = newName ? newName.replace(/^[\\s]+|[\\s]+$/g, '') : '';\r\n        let alreadyAdded = false, existingID = 0;\r\n        for (let index = 0; index < persons.length; index++) {\r\n            if (checkForExistingName(persons[index]['name'], trimmed)) {\r\n                alreadyAdded = true;\r\n                existingID = persons[index]['id'];\r\n                break;\r\n            }\r\n        }\r\n        if (!/\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})/g.test(newNumber)) {\r\n            alert(`Invalid phone number input format, try (xxx) xxx xxxx/ xxx-xxx-xxxx/(xxx)xxxxxxx/xxx.xxx.xxxx or just xxxxxxxxxx `)\r\n        }\r\n        else if (alreadyAdded) {\r\n            return (window.confirm(`${trimmed} is already added to phonebook, replace the old number with a new one?`))\r\n                ?\r\n                ((id) => {\r\n                    let personToChange = persons.find(p => p.id === id);\r\n                    const changedNum = { ...personToChange, number: newNumber };\r\n                    return phoneService.updatePerson(id, changedNum)\r\n                        .then((returnedNum) => setPersons(persons.map(person => person.id !== id ? person : returnedNum)))\r\n                        .catch(error => {\r\n                            displayMsgBox({message: `Information of ${trimmed} has already been removed from server`,style:{ color: 'red',border: 'red 3px solid', fontSize: 18}})\r\n                            persons.filter(p => p !== p.id);\r\n                        })\r\n                        .finally(() => { setNewName(''); setNewNumber(''); });\r\n                })(existingID)\r\n                :\r\n                setNewName('');\r\n        }\r\n        else {\r\n            phoneService.createPerson({ name: trimmed, number: newNumber })\r\n                .then(person => {\r\n                    console.log('succesfully created');\r\n                    setPersons([...persons, person])\r\n                    setNewName('');\r\n                    setNewNumber('');\r\n                })\r\n                .catch(err => console.log('invalid entry data', err))\r\n                .finally(() => displayMsgBox({message: `Added ${trimmed} to the phonebook`,style:{ color: 'green',border: 'green 3px solid', fontSize: 18}}));\r\n        }\r\n    }\r\n\r\n    const handleNameChange = (event) => {\r\n        //Only matches word characters, followed by either zero to one dot or a space. For example.- Dr. Stone\r\n        let filterInput = evalAndTrim(event.target.value, /[a-z]+\\.?\\s?/gi);\r\n        setNewName(filterInput);\r\n    }\r\n\r\n    const handleNumberChange = (event) => {\r\n        //Only matches numeric,dots and parenthesis\r\n        let filterInput = evalAndTrim(event.target.value, /[0-9()\\s.-]/g);\r\n        setNewNumber(filterInput);\r\n    }\r\n\r\n    const updateFilter = (event) => {\r\n        let filterInput = evalAndTrim(event.target.value, /[a-z]+\\.?\\s?/gi);\r\n        setFilter(filterInput);\r\n    }\r\n\r\n    const filteredList = () => {\r\n        let returnFilteredPerson = (name) => {\r\n            let re = new RegExp(filter, 'gi');\r\n            return re.test(name);\r\n        }\r\n        let filterPersons = persons.filter((person) => {\r\n            return (!filter) ? person : returnFilteredPerson(person.name);\r\n        });\r\n        return (filterPersons.map(person => <div key={person.name} > {person.name} {person.number} <button onClick={() => deleteNumberandUpdateList(person.name, person.id)}>delete</button></div>))\r\n    }\r\n\r\n    const deleteNumberandUpdateList = (name, id) => {\r\n        return (window.confirm(`Delete ${name}?`))\r\n            ?\r\n            phoneService.deletePerson(id)\r\n                .then(() => {\r\n                    setPersons(persons.filter(person => person.id !== id))\r\n                })\r\n                .catch(err => console.log('Unable to delete current person this time'))\r\n            : false;\r\n    }\r\n\r\n    const checkForExistingName = (person, newName) => {\r\n        if (newName) {\r\n            return (newName.toLowerCase() === person.toLowerCase()) ? true : false;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const displayMsgBox = (msg) => {\r\n        setMessageBox(msg);\r\n        setTimeout(() => {\r\n            setMessageBox(null);\r\n        }, 3000);\r\n    }\r\n\r\n\r\n    return (<div >\r\n        <h2 > Phonebook </h2> \r\n        <Modal msg={messageBox} />\r\n        <\r\n            Filter filter={filter}\r\n            updateFilter={updateFilter} />\r\n        <h2 > Add a new contact </h2> <\r\n            PersonForm addName={addName}\r\n            newName={newName}\r\n            newNumber={newNumber}\r\n            handleNameChange={handleNameChange}\r\n            handleNumberChange={handleNumberChange} />\r\n        <h2 > Numbers </h2> <Persons filteredList={filteredList} /> </div>\r\n    )\r\n}\r\n\r\nconst evalAndTrim = (str, regex) => {\r\n    str = str.match(regex);\r\n    return !(str) ? '' : str.join('');\r\n}\r\n\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n\r\n"],"sourceRoot":""}